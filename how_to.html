
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to reproduce and extend this work &#8212; Robot Rainfall Rescue</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Authors and acknowledgements" href="credits.html" />
    <link rel="prev" title="Example cross-validated image with grid corner locations" href="models/find_corners/cross-validation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="credits.html" title="Authors and acknowledgements"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="models/find_corners/cross-validation.html" title="Example cross-validated image with grid corner locations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RRR</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-reproduce-and-extend-this-work">
<h1>How to reproduce and extend this work<a class="headerlink" href="#how-to-reproduce-and-extend-this-work" title="Permalink to this headline">¶</a></h1>
<p>This project is designed to be easy to reproduce and extend. Everything involved is kept under version control in a <a class="reference external" href="https://en.wikipedia.org/wiki/Git">git repository</a>. The repository is hosted on <a class="reference external" href="https://github.com/">GitHub</a> (and the documentation made with <a class="reference external" href="https://pages.github.com/">GitHub Pages</a>). The repository is <a class="reference external" href="https://github.com/philip-brohan/Robot_Rainfall_Rescue">https://github.com/philip-brohan/Robot_Rainfall_Rescue</a>. This repository contains everything you need to reproduce or extend this work.</p>
<p>If you are familiar with GitHub, you already know what to do (fork or clone <a class="reference external" href="https://github.com/philip-brohan/Robot_Rainfall_Rescue">the repository</a>): If you’d prefer not to bother with that, you can download the whole thing as <a class="reference external" href="https://github.com/philip-brohan/Robot_Rainfall_Rescue/archive/master.zip">a zip file</a>.</p>
<p>As well as downloading the software, some setup is necessary to run it successfully:</p>
<p>These scripts need to know where to put their output files. They rely on an environment variable <code class="docutils literal notranslate"><span class="pre">SCRATCH</span></code> - set this variable to a directory with plenty of free disc space.</p>
<p>These scripts will only work in a <a class="reference external" href="https://www.python.org/">python</a> environment with the appropriate python version and libraries available. I use <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a> to manage the required python environment - which is specified in a yaml file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">RRR_gpu</span>
<span class="n">channels</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">default</span>
<span class="n">dependencies</span><span class="p">:</span>
<span class="c1"># Basics</span>
  <span class="o">-</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.7</span>
  <span class="o">-</span> <span class="n">matplotlib</span><span class="o">=</span><span class="mf">3.2</span><span class="o">.*</span>
<span class="c1"># ML model building </span>
  <span class="o">-</span> <span class="n">tensorflow</span><span class="o">-</span><span class="n">gpu</span><span class="o">=</span><span class="mf">2.2</span><span class="o">.*</span>
<span class="c1"># Image processing</span>
  <span class="o">-</span> <span class="n">pillow</span><span class="o">=</span><span class="mf">7.1</span><span class="o">.*</span>
<span class="c1"># Allow packages only available via pip</span>
  <span class="o">-</span> <span class="n">pip</span>
<span class="c1">#</span>
<span class="c1"># Optional below this</span>
<span class="c1">#</span>
<span class="c1"># Tensorflow diagnostics and profiling</span>
  <span class="o">-</span> <span class="n">tensorboard</span><span class="o">=</span><span class="mf">2.2</span><span class="o">.*</span>
  <span class="o">-</span> <span class="n">pip</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">tensorboard_plugin_profile</span>
<span class="c1"># Code formatter</span>
  <span class="o">-</span> <span class="n">black</span><span class="o">=</span><span class="mf">20.</span><span class="o">*</span>
<span class="c1"># Documentation processor</span>
  <span class="o">-</span> <span class="n">sphinx</span><span class="o">=</span><span class="mf">3.</span><span class="o">*.*</span>
</pre></div>
</div>
<p>Install <a class="reference external" href="https://docs.conda.io/en/latest/">anaconda or miniconda</a>, <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/getting-started.html#managing-envs">create and activate the environment in that yaml file</a>, and all the scripts in this repository should run successfully. In principle this should work on any operating system and machine architecture (if all the required dependencies are available for your system - you may need to specify appropriate <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/concepts/channels.html">conda channels</a> as well) - but I have only tested it on Linux/Intel/Nvidia.</p>
<p>The environment shown above installs the GPU-enabled version of the <a class="reference external" href="https://www.tensorflow.org/">Tensorflow libraries</a>. If you have no suitable GPU, replace <code class="docutils literal notranslate"><span class="pre">tensorflow-gpu</span></code> in the specification with <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> and it will work using only CPU (model training will be much slower). It can be convenient to run the data preparation and model validation steps on CPU-only systems, but for the model training steps a GPU is very desirable. (<code class="docutils literal notranslate"><span class="pre">tensorflow-gpu</span></code> does work on CPU-only systems, but plain <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> is faster).</p>
<p>The project documentation (these web pages) are included in the repository (in the <a class="reference external" href="https://github.com/philip-brohan/Robot_Rainfall_rescue/tree/master/docs">docs directory</a>). The documentation is in <a class="reference external" href="https://en.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> format, and uses the <a class="reference external" href="https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html">Sphinx</a> documentation generator.</p>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/RRR_logo.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rainfall_rescue_data/index.html">Getting the images to transcribe</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="training_data/itp.html">Preparing a transfer dataset for training</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="models/atb2.html">Direct transcription of the simplified training dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="models/layout.html">Modelling the page layout</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to reproduce or extend this work</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Authors and acknowledgements</a></li>
</ul>
<h3><a href="https://github.com/philip-brohan/Robot_Rainfall_Rescue">Get the code</a></h3>

<ul>
<li><a href="https://github.com/philip-brohan/Robot_Rainfall_Rescue"
           rel="nofollow">Github repository</a></li>
<li><a href="https://github.com/philip-brohan/Robot_Rainfall_Rescue/archive/master.zip"
           rel="nofollow">Zip file</a></li>
</ul>

<h3>Found a bug, or have a suggestion?</h3>

Please <a href="https://github.com/philip-brohan/Robot_Rainfall_Rescue/issues/new">raise an issue</a><br>or <a href="mailto://philip.brohan@metoffice.gov.uk">contact Philip</a>.
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="credits.html" title="Authors and acknowledgements"
             >next</a></li>
        <li class="right" >
          <a href="models/find_corners/cross-validation.html" title="Example cross-validated image with grid corner locations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RRR</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>